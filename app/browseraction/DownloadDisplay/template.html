<md-card class="downloadStateCard fade" ng-class="{fadeout: downloadState.trackingInfo.state === 'canceled'}"> 
	<md-button class="md-icon-button closeButton" ng-click="removeCard($event)" aria-label="remove download">
		<span class="closeSymbol">&times;</span>
	</md-button>

	<md-card-title>
		<md-card-title-text>
			<span class="md-display-1" ng-bind="downloadState.fileInfo.fileName"></span>
		</md-card-title-text>
	</md-card-title>

	<md-card-content>
		<div ng-bind="downloadState.fileInfo.id"></div>
		<div>
			<a href="{{downloadState.fileInfo.url}}" target="_blank">{{downloadState.fileInfo.url}}</a>
		</div>
		<div>
			added {{getTimeAgo()}} || {{downloadState.fileInfo.dateTimeAdded.toLocaleString()}}
		</div>

		<b>Progress:</b>
		<md-progress-linear ng-if="fileSize !== '?'" class="progress" md-mode="determinate" ng-value="downloadState.trackingInfo.percent ? downloadState.trackingInfo.percent : 0"></md-progress-linear>
		<md-progress-linear ng-if="fileSize === '?'" class="progress" md-mode="indeterminate"></md-progress-linear>

		<div class="downloadTrackingData">
			<span ng-if="downloadState.trackingInfo.percent">
				{{downloadState.trackingInfo.percent}}%
			</span>
			<!-- Front-End file size calculation from Content-Length header :: 
						alternate, back-end file size data stored in downloadState.trackingInfo.filesize (bytes) -->
			<span ng-bind="fileSize"></span>
			<span ng-if="downloadState.trackingInfo.transferSpeed">
				{{humanTransferSpeed(downloadState.trackingInfo.transferSpeed)}}/s
			</span>
			<span ng-bind="downloadState.trackingInfo.eta"></span>
		</div>

		<div class="stateControlButtons" ng-if="downloadState.trackingInfo.state !== 'finished' && downloadState.trackingInfo.state !== 'canceled'">
			<md-button class="cancelLink md-small" ng-click="cancelDownload($event)">Cancel</md-button>

			<md-button class="pauseLink md-small" ng-click="togglePause($event)" 
					ng-if="downloadState.trackingInfo.state !== 'paused'"
					ng-disabled="unpauseThrottle">
				<span ng-if="unpauseThrottle">{{unpauseThrottleTimerVal}}</span>
				<span ng-if="!unpauseThrottle">Pause</span>
			</md-button>

			<md-button class="unpauseLink md-small" ng-click="togglePause($event)" 
					ng-if="downloadState.trackingInfo.state === 'paused'"
					ng-disabled="unpauseThrottle">

				<span ng-if="unpauseThrottle">{{unpauseThrottleTimerVal}}</span>
				<span ng-if="!unpauseThrottle">Unpause</span>
			</md-button>
		</div>
	</md-card-content>
</md-card>
